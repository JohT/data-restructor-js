# Changelog

All notable changes to this project will be documented in this file.

## References

- [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
- [Semantic Versioning](https://semver.org/spec/v2.0.0.html)
- [`auto-changelog`](https://github.com/CookPete/auto-changelog)

## [v3.4.2](https://github.com/JohT/data-restructor-js/compare/v3.4.1...master) (upcoming)

### Dependency Updates

- Update dependency eslint to v8.42.0 [`#157`](https://github.com/JohT/data-restructor-js/pull/157)

## [v3.4.1](https://github.com/JohT/data-restructor-js/compare/v3.4.0...v3.4.1) (28 February 2023)

### Changes

- Pin dependency auto-changelog to 2.4.0 [`#141`](https://github.com/JohT/data-restructor-js/pull/141)
- Generate CHANGELOG.md using auto-changelog [`#140`](https://github.com/JohT/data-restructor-js/pull/140)
- Update/node-18 [`#132`](https://github.com/JohT/data-restructor-js/pull/132)

### Dependency Updates

- Update dependency eslint to v8.35.0 [`#139`](https://github.com/JohT/data-restructor-js/pull/139)
- Update dependency jsdoc to v4.0.2 [`#137`](https://github.com/JohT/data-restructor-js/pull/137)
- Update dependency jsdoc to v4.0.1 [`#136`](https://github.com/JohT/data-restructor-js/pull/136)
- Update dependency parcel to v2.8.3 [`#134`](https://github.com/JohT/data-restructor-js/pull/134)
- Update dependency eslint to v8.34.0 [`#135`](https://github.com/JohT/data-restructor-js/pull/135)
- Update dependency lmdb to v2.7.9 [`#131`](https://github.com/JohT/data-restructor-js/pull/131)
- Update dependency lmdb to v2.7.8 [`#130`](https://github.com/JohT/data-restructor-js/pull/130)
- Update dependency lmdb to v2.7.7 [`#129`](https://github.com/JohT/data-restructor-js/pull/129)
- Update dependency eslint to v8.32.0 [`#124`](https://github.com/JohT/data-restructor-js/pull/124)
- Update dependency lmdb to v2.7.2 [`#119`](https://github.com/JohT/data-restructor-js/pull/119)
- Update dependency lmdb to v2.7.0 [`#114`](https://github.com/JohT/data-restructor-js/pull/114)
- Update dependency eslint to v8.27.0 [`#113`](https://github.com/JohT/data-restructor-js/pull/113)
- Update dependency jsdoc to v4 [`#112`](https://github.com/JohT/data-restructor-js/pull/112)

## [v3.4.0](https://github.com/JohT/data-restructor-js/compare/v3.3.4...v3.4.0) (31 October 2022)

### Changes

- resolve markdown linter warnings [`#110`](https://github.com/JohT/data-restructor-js/pull/110)
- Fix build error  [`#91`](https://github.com/JohT/data-restructor-js/pull/91)
- Auto commit with protected branch [`#55`](https://github.com/JohT/data-restructor-js/pull/55)
- issue #44 further simplify auto commit on push [`#54`](https://github.com/JohT/data-restructor-js/pull/54)
- Simplify auto commit on push [`#51`](https://github.com/JohT/data-restructor-js/pull/51)
- Also consider auto commit author [`#49`](https://github.com/JohT/data-restructor-js/pull/49)
- Auto commit build artifacts on push [`#47`](https://github.com/JohT/data-restructor-js/pull/47)
- Auto commit build artifacts only on push [`#46`](https://github.com/JohT/data-restructor-js/pull/46)
- Automatically push Continuous Integration build artifacts when Pull Request is merged [`#45`](https://github.com/JohT/data-restructor-js/pull/45)
- Automate MergerJS [`#43`](https://github.com/JohT/data-restructor-js/pull/43)
- Pin dependency jasmine to v3.7.0 [`#17`](https://github.com/JohT/data-restructor-js/pull/17)
- Pin dependencies [`#16`](https://github.com/JohT/data-restructor-js/pull/16)
- Configure Renovate [`#15`](https://github.com/JohT/data-restructor-js/pull/15)

### Dependency Updates

- Update Node.js to v18 [`#108`](https://github.com/JohT/data-restructor-js/pull/108)
- Update dependency eslint to v8.26.0 [`#107`](https://github.com/JohT/data-restructor-js/pull/107)
- Update dependency eslint to v8.24.0 [`#103`](https://github.com/JohT/data-restructor-js/pull/103)
- Update dependency eslint to v8.23.1 [`#101`](https://github.com/JohT/data-restructor-js/pull/101)
- Update dependency inquirer to v9.1.1 [`#99`](https://github.com/JohT/data-restructor-js/pull/99)
- Update dependency eslint to v8.22.0 [`#97`](https://github.com/JohT/data-restructor-js/pull/97)
- Update dependency inquirer to v9.1.0 [`#96`](https://github.com/JohT/data-restructor-js/pull/96)
- Update dependency eslint to v8.21.0 [`#95`](https://github.com/JohT/data-restructor-js/pull/95)
- Update dependency jsdoc to v3.6.11 [`#93`](https://github.com/JohT/data-restructor-js/pull/93)
- Update dependency eslint to v8.19.0 [`#88`](https://github.com/JohT/data-restructor-js/pull/88)
- Update dependency inquirer to v9 [`#85`](https://github.com/JohT/data-restructor-js/pull/85)
- Update github/codeql-action action to v2 [`#75`](https://github.com/JohT/data-restructor-js/pull/75)
- Update actions/upload-artifact action to v3 [`#67`](https://github.com/JohT/data-restructor-js/pull/67)
- Update actions/setup-node action to v3 [`#64`](https://github.com/JohT/data-restructor-js/pull/64)
- Update actions/checkout action to v3 [`#66`](https://github.com/JohT/data-restructor-js/pull/66)
- Update dependency node-forge to 1.0.0 [SECURITY] [`#62`](https://github.com/JohT/data-restructor-js/pull/62)
- Update dependency nanoid to 3.1.31 [SECURITY] [`#61`](https://github.com/JohT/data-restructor-js/pull/61)
- Update dependency jasmine to v4 [`#41`](https://github.com/JohT/data-restructor-js/pull/41)
- Update dependency istanbul-badges-readme to v1.8.1 [`#37`](https://github.com/JohT/data-restructor-js/pull/37)
- Update dependency eslint to v8.4.0 [`#35`](https://github.com/JohT/data-restructor-js/pull/35)
- Update Node.js to v16 [`#30`](https://github.com/JohT/data-restructor-js/pull/30)
- Update Node.js to v14 [`#22`](https://github.com/JohT/data-restructor-js/pull/22)
- Update dependency parcel to v2.0.0-rc.0 [`#19`](https://github.com/JohT/data-restructor-js/pull/19)
- Update dependency jasmine to v3.9.0 [`#21`](https://github.com/JohT/data-restructor-js/pull/21)
- Update dependency eslint to v7.32.0 [`#20`](https://github.com/JohT/data-restructor-js/pull/20)

<!-- auto-changelog-above -->
### Automation

- [#42](https://github.com/JohT/data-restructor-js/issues/42) The command `npm run merger` is now able to run automatically.
- [#44](https://github.com/JohT/data-restructor-js/issues/44) Push Continuous Integration build artifacts into the repository.

## [v3.3.4](https://github.com/JohT/data-restructor-js/compare/v3.3.3...v3.3.4) Remove duplicate groups within recursion (17 June 2021)

### Fixes

- #12 Zero recursion duplication should be possible

## [v3.3.3](https://github.com/JohT/data-restructor-js/compare/v3.3.2...v3.3.3) IE support fix (6 June 2021)

### Fixes

- Use classic property definitions idiom instead of [ES6 PropertyShorthand](http://es6-features.org/#PropertyShorthand) for internet explorer (IE) support.

## [v3.3.2](https://github.com/JohT/data-restructor-js/compare/v3.3.1...v3.3.2) Encourage Open Source Contributing (6 June 2021)

### Features

- [README.md](README.md#build-all) contains a description on how to build the module.
- [CODE_OF_CONDUCT.md](CODE_OF_CONDUCT.md) sets the standard for an open, welcoming,
diverse, inclusive, and healthy community.
- [CONTRIBUTING.md](CONTRIBUTING.md) provides information for those who want to contribute
- Issue templates support submitting issues for bugs and new features
- [PARCEL v2](https://v2.parceljs.org) migration
- Update dependency versions

### Changes

- Setup CodeQL Analysis [`#10`](https://github.com/JohT/data-restructor-js/pull/10)
- Encourage Open Source Contribution [`#9`](https://github.com/JohT/data-restructor-js/pull/9)

## [v3.3.1](https://github.com/JohT/data-restructor-js/compare/v3.3.0...v3.3.1) Output folder fixed (9 May 2021)

### Fixes

- Minified output destination fixed. Minified files are now correctly written into the "dist" folder  (instead of "dev").

## [v3.3.0](https://github.com/JohT/data-restructor-js/compare/v3.2.0...v3.3.0) Merged source files for direct use without module system (9 May 2021)

### Features

- #7 Add merged global JavaScript files in "dist" and "devdist" to use them without module system
- security vulnerability CVE-2021-23358 https://github.com/advisories/GHSA-cf4h-3jhx-xvhq addressed
- [README.md](README.md#credits) now contains a lists of credits
- [COMMANDS.MD](COMMANDS.MD#most-important-commands-for-development) now contains a separate list for commands, that are used on a regular basis

### Changes

- Support direct use of modules in "dist" and "devdist" folder [`#8`](https://github.com/JohT/data-restructor-js/pull/8)

## [v3.2.0](https://github.com/JohT/data-restructor-js/compare/v3.1.0...v3.2.0) Configurable recursion depth above which duplications will be removed (21 April 2021)

### Features

- Configurable recursion depth above which duplications will be removed [`#6`](https://github.com/JohT/data-restructor-js/pull/6)

## [v3.1.0](https://github.com/JohT/data-restructor-js/compare/v3.0.0...v3.1.0) Configurable recursion depth for sub groups (21 March 2021)

### Features

- Configurable sub group level depth [`#4`](https://github.com/JohT/data-restructor-js/pull/4)
- Improved JSDoc structure and contents

### Fixes

- Group hierarchy limited to 1 since v3.0.0 [`#3`](https://github.com/JohT/data-restructor-js/issues/3)

### Deprecated

- `datarestructor.Restructor.processJsonUsingDescriptions(jsonData, descriptions)` is deprecated.
Please use `new datarestructor.Transform(descriptions).processJson(jsonData)` instead.

## [v3.0.0](https://github.com/JohT/data-restructor-js/compare/v2.3.0...v3.0.0) Introducing DescribedDataField (13 March 2021)

### Features

- Introducing DescribedDataField [`#2`](https://github.com/JohT/data-restructor-js/pull/2)
- Pure, non cyclic data result that can be converted to json without using additional functions

### Breaking Changes

- DescribedDataField replaces DescribedEntry as an element for the restructured output
- DescribedEntry remains only for internal use
- DescribedEntry function "resolveTemplate" is removed. "templateResolver.js" can be used instead.
- DescribedEntry function "publicFieldsJson" is removed. `JSON.stringify(describedEntry.describedField)` can be used instead.

## [v2.3.0](https://github.com/JohT/data-restructor-js/compare/v2.2.0...v2.3.0) Continuous Integration (6 February 2021)

### Features

- Continuous Integration using GitHub Actions introduced [`#1`](https://github.com/JohT/data-restructor-js/pull/1)
- Build using nodes package manager (npm)
- Bundle (minification,...) using Parcel Bundler
- Automated already existing unit tests using Jasmine
- Unit-Test coverage measurement using nyc
- Documentation Generation using JSDoc
- Static code analysis using ESLint
- Updated documentation

## [v2.2.0](https://github.com/JohT/data-restructor-js/compare/v2.1.0...v2.2.0) Resolving template with described fields (9 January 2021)

### Features

- Since v1.2.0 templates containing variables in double curly brackets can be resolved by the function `resolveTemplate(templateString)`. Now, it is not only possible to resolve the contained meta data,
but also the described fields directly. Based on the JSON below, the resolver would now provide these results:

  - `"{{customerNumber}}"`-> `"123"`
  - `"{{details.name}}"`-> `"Smith"`
  - `"{{details.age}}"`-> `"31"`

  Previously (since v1.2.0), these results could only be obtained with (remains unchanged):

  - `"{{value}}"`-> `"123"`
  - `"{{details[0].value}}"`-> `"Smith"`
  - `"{{details[1].value}}"`-> `"31"`

  ```JSON
    {
      "category": "customer",
      "type": "summary",
      "displayName": "CustomerNumber",
      "fieldName": "customerNumber",
      "value": "123",
      "details": [
        {
          "category": "customer;",
          "type": "detail",
          "displayName": "Name",
          "fieldName": "name",
          "value": "Smith"
        },
        {
          "category": "customer",
          "type": "detail",
          "displayName": "Age",
          "fieldName": "age",
          "value": "31"
        }
      ]
    }
    ```

## [v2.1.0](https://github.com/JohT/data-restructor-js/compare/v2.0.0...v2.1.0) New optional fields "abbreviation" and "image" (25 December 2020)

### Features

- With the two new optional fields **abbreviation** and **image**, that can be specified for each `PropertyStructureDescription`, it is easier to separate display related fields from e.g. the category. These fields are transferred directly into the resulting `DescribedEntry` and do not affect other behavior (grouping, filtering...) in any kind.

- If the variable `{{fieldName}}` is missing in the property pattern in "template mode", the right most part of the property name is used as field name. This corresponds to the behavior of the "equal mode". Previously this led to an error that forced the use of the "equal mode" in that case.

### Fix

- Some minor refactoring

## [v2.0.0](https://github.com/JohT/data-restructor-js/compare/v1.2.0...v2.0.0) Added "publicFieldsJson" to "DescribedEntry" (12 December 2020)

### Features

- It is now possible to convert the public fields of an `DescribedEntry` to JSON using its function `publicFieldsJson`.
This includes all contained groups, that may contain `DescribedEntry`s themselves.  
Prior to this release, the following error occurred when calling `JSON.stringify(describedEntry)`:
`TypeError: Converting circular structure to JSON`

    **Note:**  
    The property `isMatchingIndex` of the `DescribedEntry` had been renamed to `_isMatchingIndex` since it is an internal property and should not be used outside. Since this is a "breaking change" (in theory), it lead to a new major version.

    This example shows how the returned JSON looks like using parameter "space" = 2 (pretty print with 2 spaces indentation) when the `DescribedEntry` contains the group `options`:

    ```JSON
    {
      "category": "account",
      "type": "filter",
      "displayName": "Currency",
      "fieldName": "currency",
      "value": "eur",
      "options": [
        {
          "category": "account;",
          "type": "filter",
          "displayName": "Currency",
          "fieldName": "currency",
          "value": "EUR"
        },
        {
          "category": "account",
          "type": "filter",
          "displayName": "Currency",
          "fieldName": "currency",
          "value": "USD"
        }
      ]
    }
    ```

## [v1.2.0](https://github.com/JohT/data-restructor-js/compare/v1.1.0...v1.2.0) Resolving template containing properties of the described entry as variables (29 November 2020)

### Features

- It is now possible to resolve a string containing variables in double curly brackets of an `DecribedEntry` using the function `resolveTemplate(templateString)`.

#### Variables that can be used

- `"{{fieldName}}"`
- `"{{displayName}}"`
- `"{{value}}"`
- `"{{index}}"`
- `"{{index[1]}}"`

#### Example

```javascript
var rawEntry = { name: "responses[0].hits.hits[3]._source.name", value: "Smith" };
var description = new datarestructor.PropertyStructureDescriptionBuilder().type("testtype").category("testcategory").build();
var describedEntry = new datarestructor.DescribedEntryCreator(rawEntry, description);

var resolved = describedEntry.resolveTemplate("{{displayName}}: {{value}}");
// resolved is: "Name: Smith"
```

## [v1.1.0](https://github.com/JohT/data-restructor-js/compare/v1.0.0...v1.1.0) Joining and renaming groups (8 November 2020)

### Features

- [Group destination name and joining](https://github.com/JohT/data-restructor-js/commit/534c368bcb835c110e1255508ed44c790972955c)
- Groups can now be renamed, when they get moved to another destination.
- If more than one source group (array) is moved into a single destination, they get joined.  
    Previously, only the last one remained, which made it impossible to structure data within one single (e.g. main) entry.
- [Debug mode introduced](https://github.com/JohT/data-restructor-js/commit/72232e7f23ced9655c1d2693a3a5b3163c312221)
- [Minor refactoring](https://github.com/JohT/data-restructor-js/commit/14094fe247c1c1551ff518a1378a26b0cfc074c9)

## [v1.0.0](https://github.com/JohT/data-restructor-js/releases/tag/v1.0.0) Initial Release (2020-10-25)

### Features

- Adapter that takes e.g. parsed JSON and transforms it into a standardized structure
- Multiple transformation steps including flattening, removing duplicates, grouping, ...
- Takes descriptions that reflect the incoming structure and define the standardized output
- Reusable and flexible
- Supports most browser including IE 5